'use strict';

xdescribe('publicCloudHelper factory', function () {
    var factory, potentialList, oneInstance, familyList;

    beforeEach(module('zvmTest'));

    beforeEach(inject(function ($injector, _publicCloudHelper_) {
        factory = _publicCloudHelper_;
        potentialList = [{"InstanceTypeIdentifier":{"InstanceType":"t2.micro"},"FamilyName":"General Purpose","CpusCount":1,"MemoryAmountGB":1,"EbsOptimized":false,"IsSupportLinux":true,"DisplayName":"InstanceType: t2.micro","IsFeatureEnabled":true},{"InstanceTypeIdentifier":{"InstanceType":"t2.small"},"FamilyName":"General Purpose","CpusCount":1,"MemoryAmountGB":2,"EbsOptimized":false,"IsSupportLinux":true,"DisplayName":"InstanceType: t2.small","IsFeatureEnabled":true},{"InstanceTypeIdentifier":{"InstanceType":"t2.medium"},"FamilyName":"General Purpose","CpusCount":2,"MemoryAmountGB":4,"EbsOptimized":false,"IsSupportLinux":true,"DisplayName":"InstanceType: t2.medium","IsFeatureEnabled":true},{"InstanceTypeIdentifier":{"InstanceType":"m3.medium"},"FamilyName":"General Purpose","CpusCount":1,"MemoryAmountGB":3.75,"EbsOptimized":false,"IsSupportLinux":true,"DisplayName":"InstanceType: m3.medium","IsFeatureEnabled":true},{"InstanceTypeIdentifier":{"InstanceType":"m3.large"},"FamilyName":"General Purpose","CpusCount":2,"MemoryAmountGB":7.5,"EbsOptimized":false,"IsSupportLinux":true,"DisplayName":"InstanceType: m3.large","IsFeatureEnabled":true},{"InstanceTypeIdentifier":{"InstanceType":"m3.xlarge"},"FamilyName":"General Purpose","CpusCount":4,"MemoryAmountGB":15,"EbsOptimized":true,"IsSupportLinux":true,"DisplayName":"InstanceType: m3.xlarge","IsFeatureEnabled":true},{"InstanceTypeIdentifier":{"InstanceType":"m3.2xlarge"},"FamilyName":"General Purpose","CpusCount":8,"MemoryAmountGB":30,"EbsOptimized":true,"IsSupportLinux":true,"DisplayName":"InstanceType: m3.2xlarge","IsFeatureEnabled":true},{"InstanceTypeIdentifier":{"InstanceType":"c4.large"},"FamilyName":"Compute Optimized","CpusCount":2,"MemoryAmountGB":3.75,"EbsOptimized":true,"IsSupportLinux":false,"DisplayName":"InstanceType: c4.large","IsFeatureEnabled":true},{"InstanceTypeIdentifier":{"InstanceType":"c4.xlarge"},"FamilyName":"Compute Optimized","CpusCount":4,"MemoryAmountGB":7.5,"EbsOptimized":true,"IsSupportLinux":false,"DisplayName":"InstanceType: c4.xlarge","IsFeatureEnabled":true},{"InstanceTypeIdentifier":{"InstanceType":"c4.2xlarge"},"FamilyName":"Compute Optimized","CpusCount":8,"MemoryAmountGB":15,"EbsOptimized":true,"IsSupportLinux":false,"DisplayName":"InstanceType: c4.2xlarge","IsFeatureEnabled":true},{"InstanceTypeIdentifier":{"InstanceType":"c4.4xlarge"},"FamilyName":"Compute Optimized","CpusCount":16,"MemoryAmountGB":30,"EbsOptimized":true,"IsSupportLinux":false,"DisplayName":"InstanceType: c4.4xlarge","IsFeatureEnabled":true},{"InstanceTypeIdentifier":{"InstanceType":"c4.8xlarge"},"FamilyName":"Compute Optimized","CpusCount":36,"MemoryAmountGB":60,"EbsOptimized":true,"IsSupportLinux":false,"DisplayName":"InstanceType: c4.8xlarge","IsFeatureEnabled":true},{"InstanceTypeIdentifier":{"InstanceType":"c3.large"},"FamilyName":"Compute Optimized","CpusCount":2,"MemoryAmountGB":3.75,"EbsOptimized":false,"IsSupportLinux":true,"DisplayName":"InstanceType: c3.large","IsFeatureEnabled":true},{"InstanceTypeIdentifier":{"InstanceType":"c3.xlarge"},"FamilyName":"Compute Optimized","CpusCount":4,"MemoryAmountGB":7.5,"EbsOptimized":true,"IsSupportLinux":true,"DisplayName":"InstanceType: c3.xlarge","IsFeatureEnabled":true},{"InstanceTypeIdentifier":{"InstanceType":"c3.2xlarge"},"FamilyName":"Compute Optimized","CpusCount":8,"MemoryAmountGB":15,"EbsOptimized":true,"IsSupportLinux":true,"DisplayName":"InstanceType: c3.2xlarge","IsFeatureEnabled":true},{"InstanceTypeIdentifier":{"InstanceType":"c3.4xlarge"},"FamilyName":"Compute Optimized","CpusCount":16,"MemoryAmountGB":30,"EbsOptimized":true,"IsSupportLinux":true,"DisplayName":"InstanceType: c3.4xlarge","IsFeatureEnabled":true},{"InstanceTypeIdentifier":{"InstanceType":"c3.8xlarge"},"FamilyName":"Compute Optimized","CpusCount":32,"MemoryAmountGB":60,"EbsOptimized":false,"IsSupportLinux":false,"DisplayName":"InstanceType: c3.8xlarge","IsFeatureEnabled":true},{"InstanceTypeIdentifier":{"InstanceType":"g2.2xlarge"},"FamilyName":"GPU","CpusCount":8,"MemoryAmountGB":15,"EbsOptimized":true,"IsSupportLinux":false,"DisplayName":"InstanceType: g2.2xlarge","IsFeatureEnabled":true},{"InstanceTypeIdentifier":{"InstanceType":"g2.8xlarge"},"FamilyName":"GPU","CpusCount":32,"MemoryAmountGB":60,"EbsOptimized":false,"IsSupportLinux":false,"DisplayName":"InstanceType: g2.8xlarge","IsFeatureEnabled":true},{"InstanceTypeIdentifier":{"InstanceType":"r3.large"},"FamilyName":"Memory Optimized","CpusCount":2,"MemoryAmountGB":15.25,"EbsOptimized":false,"IsSupportLinux":false,"DisplayName":"InstanceType: r3.large","IsFeatureEnabled":true},{"InstanceTypeIdentifier":{"InstanceType":"r3.xlarge"},"FamilyName":"Memory Optimized","CpusCount":4,"MemoryAmountGB":30.5,"EbsOptimized":true,"IsSupportLinux":false,"DisplayName":"InstanceType: r3.xlarge","IsFeatureEnabled":true},{"InstanceTypeIdentifier":{"InstanceType":"r3.2xlarge"},"FamilyName":"Memory Optimized","CpusCount":8,"MemoryAmountGB":61,"EbsOptimized":true,"IsSupportLinux":false,"DisplayName":"InstanceType: r3.2xlarge","IsFeatureEnabled":true},{"InstanceTypeIdentifier":{"InstanceType":"r3.4xlarge"},"FamilyName":"Memory Optimized","CpusCount":16,"MemoryAmountGB":122,"EbsOptimized":true,"IsSupportLinux":false,"DisplayName":"InstanceType: r3.4xlarge","IsFeatureEnabled":true},{"InstanceTypeIdentifier":{"InstanceType":"r3.8xlarge"},"FamilyName":"Memory Optimized","CpusCount":32,"MemoryAmountGB":244,"EbsOptimized":false,"IsSupportLinux":false,"DisplayName":"InstanceType: r3.8xlarge","IsFeatureEnabled":true},{"InstanceTypeIdentifier":{"InstanceType":"i2.xlarge"},"FamilyName":"Storage Optimized","CpusCount":4,"MemoryAmountGB":30.5,"EbsOptimized":true,"IsSupportLinux":true,"DisplayName":"InstanceType: i2.xlarge","IsFeatureEnabled":true},{"InstanceTypeIdentifier":{"InstanceType":"i2.2xlarge"},"FamilyName":"Storage Optimized","CpusCount":8,"MemoryAmountGB":61,"EbsOptimized":true,"IsSupportLinux":true,"DisplayName":"InstanceType: i2.2xlarge","IsFeatureEnabled":true},{"InstanceTypeIdentifier":{"InstanceType":"i2.4xlarge"},"FamilyName":"Storage Optimized","CpusCount":16,"MemoryAmountGB":122,"EbsOptimized":true,"IsSupportLinux":true,"DisplayName":"InstanceType: i2.4xlarge","IsFeatureEnabled":true},{"InstanceTypeIdentifier":{"InstanceType":"i2.8xlarge"},"FamilyName":"Storage Optimized","CpusCount":32,"MemoryAmountGB":244,"EbsOptimized":false,"IsSupportLinux":false,"DisplayName":"InstanceType: i2.8xlarge","IsFeatureEnabled":true},{"InstanceTypeIdentifier":{"InstanceType":"d2.xlarge"},"FamilyName":"Dense-storage Instances","CpusCount":4,"MemoryAmountGB":30.5,"EbsOptimized":true,"IsSupportLinux":false,"DisplayName":"InstanceType: d2.xlarge","IsFeatureEnabled":true},{"InstanceTypeIdentifier":{"InstanceType":"d2.2xlarge"},"FamilyName":"Dense-storage Instances","CpusCount":8,"MemoryAmountGB":61,"EbsOptimized":true,"IsSupportLinux":false,"DisplayName":"InstanceType: d2.2xlarge","IsFeatureEnabled":true},{"InstanceTypeIdentifier":{"InstanceType":"d2.4xlarge"},"FamilyName":"Dense-storage Instances","CpusCount":16,"MemoryAmountGB":122,"EbsOptimized":true,"IsSupportLinux":false,"DisplayName":"InstanceType: d2.4xlarge","IsFeatureEnabled":true},{"InstanceTypeIdentifier":{"InstanceType":"d2.8xlarge"},"FamilyName":"Dense-storage Instances","CpusCount":36,"MemoryAmountGB":244,"EbsOptimized":true,"IsSupportLinux":false,"DisplayName":"InstanceType: d2.8xlarge","IsFeatureEnabled":true}];
        oneInstance = {"InstanceTypeIdentifier":{"InstanceType":"m3.xlarge"},"FamilyName":"General Purpose","CpusCount":4,"MemoryAmountGB":15,"EbsOptimized":true,"IsSupportLinux":true,"DisplayName":"InstanceType: m3.xlarge","IsFeatureEnabled":true};
        familyList = [{"DisplayName":"General Purpose","instances":[{"InstanceTypeIdentifier":{"InstanceType":"t2.micro"},"FamilyName":"General Purpose","CpusCount":1,"MemoryAmountGB":1,"EbsOptimized":false,"IsSupportLinux":true,"DisplayName":"InstanceType: t2.micro","IsFeatureEnabled":true,"Description":"t2.micro (1 vCPUs, 1 GiB, Linux supported)"},{"InstanceTypeIdentifier":{"InstanceType":"t2.small"},"FamilyName":"General Purpose","CpusCount":1,"MemoryAmountGB":2,"EbsOptimized":false,"IsSupportLinux":true,"DisplayName":"InstanceType: t2.small","IsFeatureEnabled":true,"Description":"t2.small (1 vCPUs, 2 GiB, Linux supported)"},{"InstanceTypeIdentifier":{"InstanceType":"t2.medium"},"FamilyName":"General Purpose","CpusCount":2,"MemoryAmountGB":4,"EbsOptimized":false,"IsSupportLinux":true,"DisplayName":"InstanceType: t2.medium","IsFeatureEnabled":true,"Description":"t2.medium (2 vCPUs, 4 GiB, Linux supported)"},{"InstanceTypeIdentifier":{"InstanceType":"m3.medium"},"FamilyName":"General Purpose","CpusCount":1,"MemoryAmountGB":3.75,"EbsOptimized":false,"IsSupportLinux":true,"DisplayName":"InstanceType: m3.medium","IsFeatureEnabled":true,"Description":"m3.medium (1 vCPUs, 3.75 GiB, Linux supported)"},{"InstanceTypeIdentifier":{"InstanceType":"m3.large"},"FamilyName":"General Purpose","CpusCount":2,"MemoryAmountGB":7.5,"EbsOptimized":false,"IsSupportLinux":true,"DisplayName":"InstanceType: m3.large","IsFeatureEnabled":true,"Description":"m3.large (2 vCPUs, 7.5 GiB, Linux supported)"},{"InstanceTypeIdentifier":{"InstanceType":"m3.xlarge"},"FamilyName":"General Purpose","CpusCount":4,"MemoryAmountGB":15,"EbsOptimized":true,"IsSupportLinux":true,"DisplayName":"InstanceType: m3.xlarge","IsFeatureEnabled":true,"Description":"m3.xlarge (4 vCPUs, 15 GiB, EBS only, Linux supported)"},{"InstanceTypeIdentifier":{"InstanceType":"m3.2xlarge"},"FamilyName":"General Purpose","CpusCount":8,"MemoryAmountGB":30,"EbsOptimized":true,"IsSupportLinux":true,"DisplayName":"InstanceType: m3.2xlarge","IsFeatureEnabled":true,"Description":"m3.2xlarge (8 vCPUs, 30 GiB, EBS only, Linux supported)"}]},{"DisplayName":"Compute Optimized","instances":[{"InstanceTypeIdentifier":{"InstanceType":"c4.large"},"FamilyName":"Compute Optimized","CpusCount":2,"MemoryAmountGB":3.75,"EbsOptimized":true,"IsSupportLinux":false,"DisplayName":"InstanceType: c4.large","IsFeatureEnabled":true,"Description":"c4.large (2 vCPUs, 3.75 GiB, EBS only)"},{"InstanceTypeIdentifier":{"InstanceType":"c4.xlarge"},"FamilyName":"Compute Optimized","CpusCount":4,"MemoryAmountGB":7.5,"EbsOptimized":true,"IsSupportLinux":false,"DisplayName":"InstanceType: c4.xlarge","IsFeatureEnabled":true,"Description":"c4.xlarge (4 vCPUs, 7.5 GiB, EBS only)"},{"InstanceTypeIdentifier":{"InstanceType":"c4.2xlarge"},"FamilyName":"Compute Optimized","CpusCount":8,"MemoryAmountGB":15,"EbsOptimized":true,"IsSupportLinux":false,"DisplayName":"InstanceType: c4.2xlarge","IsFeatureEnabled":true,"Description":"c4.2xlarge (8 vCPUs, 15 GiB, EBS only)"},{"InstanceTypeIdentifier":{"InstanceType":"c4.4xlarge"},"FamilyName":"Compute Optimized","CpusCount":16,"MemoryAmountGB":30,"EbsOptimized":true,"IsSupportLinux":false,"DisplayName":"InstanceType: c4.4xlarge","IsFeatureEnabled":true,"Description":"c4.4xlarge (16 vCPUs, 30 GiB, EBS only)"},{"InstanceTypeIdentifier":{"InstanceType":"c4.8xlarge"},"FamilyName":"Compute Optimized","CpusCount":36,"MemoryAmountGB":60,"EbsOptimized":true,"IsSupportLinux":false,"DisplayName":"InstanceType: c4.8xlarge","IsFeatureEnabled":true,"Description":"c4.8xlarge (36 vCPUs, 60 GiB, EBS only)"},{"InstanceTypeIdentifier":{"InstanceType":"c3.large"},"FamilyName":"Compute Optimized","CpusCount":2,"MemoryAmountGB":3.75,"EbsOptimized":false,"IsSupportLinux":true,"DisplayName":"InstanceType: c3.large","IsFeatureEnabled":true,"Description":"c3.large (2 vCPUs, 3.75 GiB, Linux supported)"},{"InstanceTypeIdentifier":{"InstanceType":"c3.xlarge"},"FamilyName":"Compute Optimized","CpusCount":4,"MemoryAmountGB":7.5,"EbsOptimized":true,"IsSupportLinux":true,"DisplayName":"InstanceType: c3.xlarge","IsFeatureEnabled":true,"Description":"c3.xlarge (4 vCPUs, 7.5 GiB, EBS only, Linux supported)"},{"InstanceTypeIdentifier":{"InstanceType":"c3.2xlarge"},"FamilyName":"Compute Optimized","CpusCount":8,"MemoryAmountGB":15,"EbsOptimized":true,"IsSupportLinux":true,"DisplayName":"InstanceType: c3.2xlarge","IsFeatureEnabled":true,"Description":"c3.2xlarge (8 vCPUs, 15 GiB, EBS only, Linux supported)"},{"InstanceTypeIdentifier":{"InstanceType":"c3.4xlarge"},"FamilyName":"Compute Optimized","CpusCount":16,"MemoryAmountGB":30,"EbsOptimized":true,"IsSupportLinux":true,"DisplayName":"InstanceType: c3.4xlarge","IsFeatureEnabled":true,"Description":"c3.4xlarge (16 vCPUs, 30 GiB, EBS only, Linux supported)"},{"InstanceTypeIdentifier":{"InstanceType":"c3.8xlarge"},"FamilyName":"Compute Optimized","CpusCount":32,"MemoryAmountGB":60,"EbsOptimized":false,"IsSupportLinux":false,"DisplayName":"InstanceType: c3.8xlarge","IsFeatureEnabled":true,"Description":"c3.8xlarge (32 vCPUs, 60 GiB)"}]},{"DisplayName":"GPU","instances":[{"InstanceTypeIdentifier":{"InstanceType":"g2.2xlarge"},"FamilyName":"GPU","CpusCount":8,"MemoryAmountGB":15,"EbsOptimized":true,"IsSupportLinux":false,"DisplayName":"InstanceType: g2.2xlarge","IsFeatureEnabled":true,"Description":"g2.2xlarge (8 vCPUs, 15 GiB, EBS only)"},{"InstanceTypeIdentifier":{"InstanceType":"g2.8xlarge"},"FamilyName":"GPU","CpusCount":32,"MemoryAmountGB":60,"EbsOptimized":false,"IsSupportLinux":false,"DisplayName":"InstanceType: g2.8xlarge","IsFeatureEnabled":true,"Description":"g2.8xlarge (32 vCPUs, 60 GiB)"}]},{"DisplayName":"Memory Optimized","instances":[{"InstanceTypeIdentifier":{"InstanceType":"r3.large"},"FamilyName":"Memory Optimized","CpusCount":2,"MemoryAmountGB":15.25,"EbsOptimized":false,"IsSupportLinux":false,"DisplayName":"InstanceType: r3.large","IsFeatureEnabled":true,"Description":"r3.large (2 vCPUs, 15.25 GiB)"},{"InstanceTypeIdentifier":{"InstanceType":"r3.xlarge"},"FamilyName":"Memory Optimized","CpusCount":4,"MemoryAmountGB":30.5,"EbsOptimized":true,"IsSupportLinux":false,"DisplayName":"InstanceType: r3.xlarge","IsFeatureEnabled":true,"Description":"r3.xlarge (4 vCPUs, 30.5 GiB, EBS only)"},{"InstanceTypeIdentifier":{"InstanceType":"r3.2xlarge"},"FamilyName":"Memory Optimized","CpusCount":8,"MemoryAmountGB":61,"EbsOptimized":true,"IsSupportLinux":false,"DisplayName":"InstanceType: r3.2xlarge","IsFeatureEnabled":true,"Description":"r3.2xlarge (8 vCPUs, 61 GiB, EBS only)"},{"InstanceTypeIdentifier":{"InstanceType":"r3.4xlarge"},"FamilyName":"Memory Optimized","CpusCount":16,"MemoryAmountGB":122,"EbsOptimized":true,"IsSupportLinux":false,"DisplayName":"InstanceType: r3.4xlarge","IsFeatureEnabled":true,"Description":"r3.4xlarge (16 vCPUs, 122 GiB, EBS only)"},{"InstanceTypeIdentifier":{"InstanceType":"r3.8xlarge"},"FamilyName":"Memory Optimized","CpusCount":32,"MemoryAmountGB":244,"EbsOptimized":false,"IsSupportLinux":false,"DisplayName":"InstanceType: r3.8xlarge","IsFeatureEnabled":true,"Description":"r3.8xlarge (32 vCPUs, 244 GiB)"}]},{"DisplayName":"Storage Optimized","instances":[{"InstanceTypeIdentifier":{"InstanceType":"i2.xlarge"},"FamilyName":"Storage Optimized","CpusCount":4,"MemoryAmountGB":30.5,"EbsOptimized":true,"IsSupportLinux":true,"DisplayName":"InstanceType: i2.xlarge","IsFeatureEnabled":true,"Description":"i2.xlarge (4 vCPUs, 30.5 GiB, EBS only, Linux supported)"},{"InstanceTypeIdentifier":{"InstanceType":"i2.2xlarge"},"FamilyName":"Storage Optimized","CpusCount":8,"MemoryAmountGB":61,"EbsOptimized":true,"IsSupportLinux":true,"DisplayName":"InstanceType: i2.2xlarge","IsFeatureEnabled":true,"Description":"i2.2xlarge (8 vCPUs, 61 GiB, EBS only, Linux supported)"},{"InstanceTypeIdentifier":{"InstanceType":"i2.4xlarge"},"FamilyName":"Storage Optimized","CpusCount":16,"MemoryAmountGB":122,"EbsOptimized":true,"IsSupportLinux":true,"DisplayName":"InstanceType: i2.4xlarge","IsFeatureEnabled":true,"Description":"i2.4xlarge (16 vCPUs, 122 GiB, EBS only, Linux supported)"},{"InstanceTypeIdentifier":{"InstanceType":"i2.8xlarge"},"FamilyName":"Storage Optimized","CpusCount":32,"MemoryAmountGB":244,"EbsOptimized":false,"IsSupportLinux":false,"DisplayName":"InstanceType: i2.8xlarge","IsFeatureEnabled":true,"Description":"i2.8xlarge (32 vCPUs, 244 GiB)"}]},{"DisplayName":"Dense-storage Instances","instances":[{"InstanceTypeIdentifier":{"InstanceType":"d2.xlarge"},"FamilyName":"Dense-storage Instances","CpusCount":4,"MemoryAmountGB":30.5,"EbsOptimized":true,"IsSupportLinux":false,"DisplayName":"InstanceType: d2.xlarge","IsFeatureEnabled":true,"Description":"d2.xlarge (4 vCPUs, 30.5 GiB, EBS only)"},{"InstanceTypeIdentifier":{"InstanceType":"d2.2xlarge"},"FamilyName":"Dense-storage Instances","CpusCount":8,"MemoryAmountGB":61,"EbsOptimized":true,"IsSupportLinux":false,"DisplayName":"InstanceType: d2.2xlarge","IsFeatureEnabled":true,"Description":"d2.2xlarge (8 vCPUs, 61 GiB, EBS only)"},{"InstanceTypeIdentifier":{"InstanceType":"d2.4xlarge"},"FamilyName":"Dense-storage Instances","CpusCount":16,"MemoryAmountGB":122,"EbsOptimized":true,"IsSupportLinux":false,"DisplayName":"InstanceType: d2.4xlarge","IsFeatureEnabled":true,"Description":"d2.4xlarge (16 vCPUs, 122 GiB, EBS only)"},{"InstanceTypeIdentifier":{"InstanceType":"d2.8xlarge"},"FamilyName":"Dense-storage Instances","CpusCount":36,"MemoryAmountGB":244,"EbsOptimized":true,"IsSupportLinux":false,"DisplayName":"InstanceType: d2.8xlarge","IsFeatureEnabled":true,"Description":"d2.8xlarge (36 vCPUs, 244 GiB, EBS only)"}]}];
    }));

    it("should check showInstanceTypes function", function () {
        expect(factory.showInstanceTypes(potentialList)).toBeTruthy();
    });

    it("should check createFamilyInstanceList", function () {
        expect(factory.createFamilyInstanceList(potentialList)[0].DisplayName).toEqual('General Purpose');
        expect(factory.createFamilyInstanceList(potentialList)[0].instances.length).toEqual(7);
    });

    it("should check selectFamilyFromInstance function", function () {
        expect(factory.selectFamilyFromInstance(oneInstance, familyList).DisplayName).toEqual('General Purpose');
    });

    it("should check setDescriptions", function () {
        var instances = [{"InstanceTypeIdentifier":{"InstanceType":"t2.micro"},"FamilyName":"General Purpose","CpusCount":1,"MemoryAmountGB":1,"EbsOptimized":false,"IsSupportLinux":true,"DisplayName":"InstanceType: t2.micro","IsFeatureEnabled":true,"Description":"t2.micro (1 vCPUs, 1 GiB, Linux supported)"},{"InstanceTypeIdentifier":{"InstanceType":"t2.small"},"FamilyName":"General Purpose","CpusCount":1,"MemoryAmountGB":2,"EbsOptimized":false,"IsSupportLinux":true,"DisplayName":"InstanceType: t2.small","IsFeatureEnabled":true,"Description":"t2.small (1 vCPUs, 2 GiB, Linux supported)"},{"InstanceTypeIdentifier":{"InstanceType":"t2.medium"},"FamilyName":"General Purpose","CpusCount":2,"MemoryAmountGB":4,"EbsOptimized":false,"IsSupportLinux":true,"DisplayName":"InstanceType: t2.medium","IsFeatureEnabled":true,"Description":"t2.medium (2 vCPUs, 4 GiB, Linux supported)"},{"InstanceTypeIdentifier":{"InstanceType":"m3.medium"},"FamilyName":"General Purpose","CpusCount":1,"MemoryAmountGB":3.75,"EbsOptimized":false,"IsSupportLinux":true,"DisplayName":"InstanceType: m3.medium","IsFeatureEnabled":true,"Description":"m3.medium (1 vCPUs, 3.75 GiB, Linux supported)"},{"InstanceTypeIdentifier":{"InstanceType":"m3.large"},"FamilyName":"General Purpose","CpusCount":2,"MemoryAmountGB":7.5,"EbsOptimized":false,"IsSupportLinux":true,"DisplayName":"InstanceType: m3.large","IsFeatureEnabled":true,"Description":"m3.large (2 vCPUs, 7.5 GiB, Linux supported)"},{"InstanceTypeIdentifier":{"InstanceType":"m3.xlarge"},"FamilyName":"General Purpose","CpusCount":4,"MemoryAmountGB":15,"EbsOptimized":true,"IsSupportLinux":true,"DisplayName":"InstanceType: m3.xlarge","IsFeatureEnabled":true,"Description":"m3.xlarge (4 vCPUs, 15 GiB, EBS only, Linux supported)"},{"InstanceTypeIdentifier":{"InstanceType":"m3.2xlarge"},"FamilyName":"General Purpose","CpusCount":8,"MemoryAmountGB":30,"EbsOptimized":true,"IsSupportLinux":true,"DisplayName":"InstanceType: m3.2xlarge","IsFeatureEnabled":true,"Description":"m3.2xlarge (8 vCPUs, 30 GiB, EBS only, Linux supported)"}];
        factory.setDescriptions(instances);
        expect(instances[1].Description).toEqual('t2.small (1 vCPUs, 2 GB, Linux supported)');
    });

    it("should check prepareInstanceDescription function", function () {
        var desc = factory.prepareInstanceDescription(oneInstance);
        expect(desc).toEqual('m3.xlarge (4 vCPUs, 15 GB, EBS only, Linux supported)');
    });

    it("should check selectInstanceByIdentifier function", function () {
        var identifier = 'g2.8xlarge';
        var list = [{"InstanceTypeIdentifier":{"InstanceType":"g2.2xlarge"},"FamilyName":"GPU","CpusCount":8,"MemoryAmountGB":15,"EbsOptimized":true,"IsSupportLinux":false,"DisplayName":"InstanceType: g2.2xlarge","IsFeatureEnabled":true,"Description":"g2.2xlarge (8 vCPUs, 15 GB, EBS only)"},{"InstanceTypeIdentifier":{"InstanceType":"g2.8xlarge"},"FamilyName":"GPU","CpusCount":32,"MemoryAmountGB":60,"EbsOptimized":false,"IsSupportLinux":false,"DisplayName":"InstanceType: g2.8xlarge","IsFeatureEnabled":true,"Description":"g2.8xlarge (32 vCPUs, 60 GB)"}];
        var instance = factory.selectInstanceByIdentifier(identifier, list);
        expect(instance).toEqual({"InstanceTypeIdentifier":{"InstanceType":"g2.8xlarge"},"FamilyName":"GPU","CpusCount":32,"MemoryAmountGB":60,"EbsOptimized":false,"IsSupportLinux":false,"DisplayName":"InstanceType: g2.8xlarge","IsFeatureEnabled":true,"Description":"g2.8xlarge (32 vCPUs, 60 GB)"});
    });
});
